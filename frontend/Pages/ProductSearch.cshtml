@page
@model FactorySystemWebpage.Pages.ProductSearchModel
@{
    ViewData["Title"] = Model.Translate("Product Traceability", "تتبع المنتج");
    Layout = "~/Pages/Shared/_LayoutArabic.cshtml";
}

<div class="mb-4">
    <h1 class="display-4">
        <i class="bi bi-search"></i> @Model.Translate("Product Traceability", "تتبع المنتج")
    </h1>
    <p class="lead text-muted">
        @Model.Translate("Search for a product to view complete traceability information", "ابحث عن منتج لعرض معلومات التتبع الكاملة")
    </p>
</div>

<div class="row mb-4">
    <div class="col-md-8 mx-auto">
        <div class="card shadow-sm">
            <div class="card-body">
                <form method="post">
                    <div class="input-group input-group-lg">
                        <span class="input-group-text"><i class="bi bi-upc-scan"></i></span>
                        <input type="text" class="form-control" name="productCode" value="@Model.ProductCode"
                               placeholder="@Model.Translate("Enter Product Code (e.g., CR20210315-001)", "أدخل رمز المنتج (مثال: CR20210315-001)")">
                        <button class="btn btn-primary" type="submit">
                            <i class="bi bi-search"></i> @Model.Translate("Search", "بحث")
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@if (Model.ProductFound)
{
    <div class="row g-4">
        <!-- Product Information -->
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-basket"></i> @Model.Translate("Product Information", "معلومات المنتج")</h5>
                </div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr>
                            <th>@Model.Translate("Product Code:", "رمز المنتج:")</th>
                            <td><strong class="text-primary">@Model.ProductCode</strong></td>
                        </tr>
                        <tr>
                            <th>@Model.Translate("Product Name:", "اسم المنتج:")</th>
                            <td>--</td>
                        </tr>
                        <tr>
                            <th>@Model.Translate("Type:", "النوع:")</th>
                            <td>--</td>
                        </tr>
                        <tr>
                            <th>@Model.Translate("Production Date:", "تاريخ الإنتاج:")</th>
                            <td>--</td>
                        </tr>
                        <tr>
                            <th>@Model.Translate("Expiration Date:", "تاريخ انتهاء الصلاحية:")</th>
                            <td>--</td>
                        </tr>
                        <tr>
                            <th>@Model.Translate("Quantity:", "الكمية:")</th>
                            <td>--</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <!-- Production Room Information -->
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-building"></i> @Model.Translate("Production Information", "معلومات الإنتاج")</h5>
                </div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr>
                            <th>@Model.Translate("Production Room:", "غرفة الإنتاج:")</th>
                            <td>--</td>
                        </tr>
                        <tr>
                            <th>@Model.Translate("Production Line:", "خط الإنتاج:")</th>
                            <td>--</td>
                        </tr>
                        <tr>
                            <th>@Model.Translate("Location:", "الموقع:")</th>
                            <td>--</td>
                        </tr>
                    </table>
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> @Model.Translate("Connect to database to view production details", "اتصل بقاعدة البيانات لعرض تفاصيل الإنتاج")
                    </div>
                </div>
            </div>
        </div>

        <!-- Raw Materials Used -->
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="bi bi-bag"></i> @Model.Translate("Raw Materials Used", "المواد الخام المستخدمة")</h5>
                </div>
                <div class="card-body">
                    <p>@Model.Translate("The following raw materials were used in this product:", "المواد الخام التالية تم استخدامها في هذا المنتج:")</p>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>@Model.Translate("Material Name", "اسم المادة")</th>
                                    <th>@Model.Translate("Batch Number", "رقم الدفعة")</th>
                                    <th>@Model.Translate("Vendor", "المورد")</th>
                                    <th>@Model.Translate("Quantity Used", "الكمية المستخدمة")</th>
                                    <th>@Model.Translate("Production Date", "تاريخ الإنتاج")</th>
                                    <th>@Model.Translate("Expiration Date", "تاريخ انتهاء الصلاحية")</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" class="text-center text-muted">
                                        <i class="bi bi-info-circle"></i> @Model.Translate("Connect to database to view materials", "اتصل بقاعدة البيانات لعرض المواد")
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Employees Involved -->
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-people"></i> @Model.Translate("Employees Involved", "الموظفون المشاركون")</h5>
                </div>
                <div class="card-body">
                    <p>@Model.Translate("Employees who worked on this product:", "الموظفون الذين عملوا على هذا المنتج:")</p>
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> @Model.Translate("Connect to database to view employee assignments", "اتصل بقاعدة البيانات لعرض تعيينات الموظفين")
                    </div>
                </div>
            </div>
        </div>

        <!-- Distribution Information -->
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="bi bi-truck"></i> @Model.Translate("Distribution", "التوزيع")</h5>
                </div>
                <div class="card-body">
                    <p>@Model.Translate("Distribution information:", "معلومات التوزيع:")</p>
                    <table class="table table-borderless">
                        <tr>
                            <th>@Model.Translate("Customer:", "العميل:")</th>
                            <td>--</td>
                        </tr>
                        <tr>
                            <th>@Model.Translate("Ship Date:", "تاريخ الشحن:")</th>
                            <td>--</td>
                        </tr>
                        <tr>
                            <th>@Model.Translate("Location:", "الموقع:")</th>
                            <td>--</td>
                        </tr>
                    </table>
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> @Model.Translate("Connect to database to view distribution details", "اتصل بقاعدة البيانات لعرض تفاصيل التوزيع")
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else if (!string.IsNullOrEmpty(Model.ProductCode))
{
    <div class="alert alert-warning">
        <i class="bi bi-exclamation-triangle"></i> @Model.Translate($"Product with code '{Model.ProductCode}' not found.", $"لم يتم العثور على منتج برمز '{Model.ProductCode}'.")
    </div>
}
